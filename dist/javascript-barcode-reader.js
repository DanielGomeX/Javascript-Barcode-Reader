var javascriptBarcodeReader=function(a){"use strict";var c=Math.ceil,d=Math.round;a=a&&a.hasOwnProperty("default")?a["default"]:a;var e={3211:"0",2221:"1",2122:"2",1411:"3",1132:"4",1231:"5",1114:"6",1312:"7",1213:"8",3112:"9"},f=function(a){var b="";// manually add start dummy line
a.unshift(0);//eslint-disable-line
for(var c,f=~~((a[1]+a[2]+a[3])/3),g=1;g<a.length;g+=1){c=void 0,c=6>b.length?a.slice(4*g,4*g+4):a.slice(4*g+5,4*g+9);var h=[d(c[0]/f),d(c[1]/f),d(c[2]/f),d(c[3]/f)],j=e[h.join("")]||e[h.reverse().join("")];if(j)b+=j;else return j;if(12===b.length)break}return b},g={3211:"0",2221:"1",2122:"2",1411:"3",1132:"4",1231:"5",1114:"6",1312:"7",1213:"8",3112:"9"},h=function(a){var b="";// manually add start dummy line
a.unshift(0);//eslint-disable-line
for(var c,e=~~((a[1]+a[2]+a[3])/3),f=1;f<a.length;f+=1){c=void 0,c=4>b.length?a.slice(4*f,4*f+4):a.slice(4*f+5,4*f+9);var h=[d(c[0]/e),d(c[1]/e),d(c[2]/e),d(c[3]/e)],j=g[h.join("")]||g[h.reverse().join("")];if(j)b+=j;else return j;if(8===b.length)break}return b},i={nnnwwnwnn:"0",wnnwnnnnw:"1",nnwwnnnnw:"2",wnwwnnnnn:"3",nnnwwnnnw:"4",wnnwwnnnn:"5",nnwwwnnnn:"6",nnnwnnwnw:"7",wnnwnnwnn:"8",nnwwnnwnn:"9",wnnnnwnnw:"A",nnwnnwnnw:"B",wnwnnwnnn:"C",nnnnwwnnw:"D",wnnnwwnnn:"E",nnwnwwnnn:"F",nnnnnwwnw:"G",wnnnnwwnn:"H",nnwnnwwnn:"I",nnnnwwwnn:"J",wnnnnnnww:"K",nnwnnnnww:"L",wnwnnnnwn:"M",nnnnwnnww:"N",wnnnwnnwn:"O",nnwnwnnwn:"P",nnnnnnwww:"Q",wnnnnnwwn:"R",nnwnnnwwn:"S",nnnnwnwwn:"T",wwnnnnnnw:"U",nwwnnnnnw:"V",wwwnnnnnn:"W",nwnnwnnnw:"X",wwnnwnnnn:"Y",nwwnwnnnn:"Z",nwnnnnwnw:"-",wwnnnnwnn:".",nwwnnnwnn:" ",nwnwnwnnn:"$",nwnwnnnwn:"/",nwnnnwnwn:"+",nnnwnwnwn:"%",nwnnwnwnn:"*"},j=function(a){// Read one encoded character at a time.
for(var b=[],d=c(a.reduce(function(a,b){return a+b},0)/a.length);0<a.length;){var e=a.splice(0,10).map(function(a){return a>d?"w":"n"});b.push(i[e.slice(0,9).join("")])}return"*"!==b.pop()||"*"!==b.shift()?null:b.join("")},k=[{100010100:"0"},{101001000:"1"},{101000100:"2"},{101000010:"3"},{100101000:"4"},{100100100:"5"},{100100010:"6"},{101010000:"7"},{100010010:"8"},{100001010:"9"},{110101000:"A"},{110100100:"B"},{110100010:"C"},{110010100:"D"},{110010010:"E"},{110001010:"F"},{101101000:"G"},{101100100:"H"},{101100010:"I"},{100110100:"J"},{100011010:"K"},{101011000:"L"},{101001100:"M"},{101000110:"N"},{100101100:"O"},{100010110:"P"},{110110100:"Q"},{110110010:"R"},{110101100:"S"},{110100110:"T"},{110010110:"U"},{110011010:"V"},{101101100:"W"},{101100110:"X"},{100110110:"Y"},{100111010:"Z"},{100101110:"-"},{111010100:"."},{111010010:" "},{111001010:"$"},{101101110:"/"},{101110110:"+"},{110101110:"%"},{100100110:"($)"},{111011010:"(%)"},{111010110:"(/)"},{100110010:"(+)"},{101011110:"*"}],l=function(a){var b=[],d=[];a.pop();// leave the padded *
for(var e,f=c(a.reduce(function(a,b){return a+b},0)/a.length),g=c(a.reduce(function(a,b){return b<f?(a+b)/2:a},0)),h=0;h<a.length;h+=1)for(e=a[h];0<e;)0==h%2?d.push(1):d.push(0),e-=g;for(var j=function(a){var c=d.slice(a,a+9).join("");b.push(k.filter(function(a){return Object.keys(a)[0]===c})[0][c])},l=0;l<d.length;l+=9)j(l);if("*"!==b.shift()||"*"!==b.pop())return null;for(var m,n,o=b.pop(),p=0,q=function(a){return Object.values(a)[0]===m},r=b.length-1;0<=r;r-=1)m=b[r],n=k.indexOf(k.filter(q)[0]),p+=n*(1+(b.length-(r+1))%20);if(Object.values(k[p%47])[0]!==o)return null;var s=b.pop();p=0;for(var t=b.length-1;0<=t;t-=1)m=b[t],n=k.indexOf(k.filter(q)[0]),p+=n*(1+(b.length-(t+1))%20);return Object.values(k[p%47])[0]===s?b.join(""):null},m=["nnwwn","wnnnw","nwnnw","wwnnn","nnwnw","wnwnn","nwwnn","nnnww","wnnwn","nwnwn"],n=function(d,e){void 0===e&&(e="standard");var f=[],g=c(d.reduce(function(a,b){return(a+b)/2},0));if("interleaved"===e){// extract start/ends pair
var h=d.splice(0,4).map(function(a){return a>g?"w":"n"}).join(""),i=d.splice(d.length-3,3).map(function(a){return a>g?"w":"n"}).join("");if("nnnn"!==h||"wnn"!==i)return null;// Read one encoded character at a time.
for(;0<d.length;){var j=d.splice(0,10),k=j.filter(function(a,b){return 0==b%2}).map(function(a){return a>g?"w":"n"}).join("");f.push(m.indexOf(k));var a=j.filter(function(a,b){return 0!=b%2}).map(function(a){return a>g?"w":"n"}).join("");f.push(m.indexOf(a))}}else if("standard"===e){// extract start/ends pair
var b=d.splice(0,6).filter(function(a,b){return 0==b%2}).map(function(a){return a>g?"w":"n"}).join(""),l=d.splice(d.length-5,5).filter(function(a,b){return 0==b%2}).map(function(a){return a>g?"w":"n"}).join("");if("wwn"!==b||"wnw"!==l)return null;// Read one encoded character at a time.
for(;0<d.length;){var n=d.splice(0,10).filter(function(a,b){return 0==b%2}).map(function(a){return a>g?"w":"n"}).join("");f.push(m.indexOf(n))}}return f.join("")},o={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nnnwnww:"B",nwnwnnw:"C",nnnwwwn:"D"},p=function(b){// Read one encoded character at a time.
for(var d=[],e=c(b.reduce(function(a,b){return(a+b)/2},0));0<b.length;){var f=b.splice(0,8).splice(0,7),g=f.map(function(a){return a<e?"n":"w"}).join("");d.push(o[g])}return d.join("")},q=["212222","222122","222221","121223","121322","131222","122213","122312","132212","221213","221312","231212","112232","122132","122231","113222","123122","123221","223211","221132","221231","213212","223112","312131","311222","321122","321221","312212","322112","322211","212123","212321","232121","111323","131123","131321","112313","132113","132311","211313","231113","231311","112133","112331","132131","113123","113321","133121","313121","211331","231131","213113","213311","213131","311123","311321","331121","312113","312311","332111","314111","221411","431111","111224","111422","121124","121421","141122","141221","112214","112412","122114","122411","142112","142211","241211","221114","413111","241112","134111","111242","121142","121241","114212","124112","124211","411212","421112","421211","212141","214121","412121","111143","111341","131141","114113","114311","411113","411311","113141","114131","311141","411131","211412","211214","211232","233111","211133","2331112"],r=[" ","!","\"","#","$","%","&","'","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","\\","]","^","_","NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","HT","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","FNC 3","FNC 2","Shift B","Code C","Code B","FNC 4","FNC 1"],s=[" ","!","\"","#","$","%","&","'","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","\\","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","DEL","FNC 3","FNC 2","Shift A","Code C","FNC 4","Code A","FNC 1"],t=["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","Code B","Code A","FNC 1"],u=function(a){var b,e,f,g,h,j=[],k=[];a.pop();var l=c(a.reduce(function(a,b){return(a+b)/2},0)),m=d(a.reduce(function(a,b){return b<=l?(a+b)/2:a},0));switch(a.forEach(function(a){k.push(d(a/m))}),f=k.splice(0,6).join(""),f){case"211214":b=s,e=104;break;case"211232":b=t,e=105;break;default:b=r,e=103;}for(var n=1;12<k.length;n+=1)switch(f=k.splice(0,6).join(""),h=q.indexOf(f),e+=n*h,g=b[h],g){case"Code A":b=r;break;case"Code B":b=s;break;case"Code C":b=t;break;default:j.push(g);}return f=k.splice(0,6).join(""),e%103===q.indexOf(f)?j.join(""):null},v=function(a,b){return b={exports:{}},a(b,b.exports),b.exports}(function(b){function c(c){var d;if(!((!document||!window)&&b.exports)){"string"==typeof c&&(c=document.getElementById(c));var e=c.tagName;if("IMG"===e){var f=document.createElement("canvas");f.width=c.naturalWidth,f.height=c.naturalHeight;var g=f.getContext("2d");g.drawImage(c,0,0),d=g.getImageData(0,0,c.naturalWidth,c.naturalHeight)}else if("CANVAS"===e)d=c.getContext("2d").getImageData(0,0,c.naturalWidth,c.naturalHeight);else if(c.data)d=c;else throw new Error("Invalid image source specified!")}else// this is node.js
if("string"==typeof c||c instanceof Buffer){// eslint-disable-next-line
var h=a;h.read(c).then(function(a){return a.bitmap})}else if(c.data)d=c;else throw new Error("Invalid image source specified!");return d}/**
	 *
	 * @param {*} image Image element || Canvas || ImageData || Image Path in Node.js
	 * @param {Object} options
	 */var d={"code-93":l,"code-39":j,"ean-13":f,"ean-8":h,"code-2of5":n,"code-128":u,codabar:p},e=function(a,b){// eslint-disable-next-line
for(var e=Math.floor,f=c(a),h=f.data,j=f.width,k=f.height,l=[1,9,2,8,3,7,4,6,5],m=l.length,n=k/(m+1);m-=1;){// create section of height 2
// grey scale section and sum of columns pixels in section
for(var o=4*j*e(n*l[m]),p=4*j*e(n*l[m])+8*j,q=h.slice(o,p),r=[],t=0,u=0,v=0;2>v;v+=1)for(var w=0;w<j;w+=1){var x=4*(v*j+w),i=(3*q[x]+4*q[x+1]+2*q[x+2])/9,g=r[w];q[x]=i,q[x+1]=i,q[x+2]=i,r[w]=i+(g===void 0?0:g)}for(var s=0;s<j;s+=1){r[s]/=2;var y=r[s];y<t&&(t=y),y>u&&(u=y)}// matches columns in two rows
for(var z,A=t+(u-t)/2,B=[],C=0;C<j;C+=1){z=0;for(var D=0;2>D;D+=1)q[4*(D*j+C)]>A&&(z+=1);B.push(1<z)}// matches width of barcode lines
for(var E=B[0],F=1,G=[],H=0;H<j;H+=1)B[H]===E?(F+=1,H==j-1&&G.push(F)):(G.push(F),F=1,E=B[H]);// eslint-disable-next-line
if(!(1>=G.length)){G.shift(),G.pop();// Run the decoder
var I=d[b.barcode](G,b.type);if(I)return I;// only one iteration when dev mode
process&&"development"===process.env.NODE_ENV&&(m=1)}// remove empty whitespaces on side of barcode
}return null};b&&b.exports?b.exports=e:window&&(window.javascriptBarcodeReader=e)});return v}(jimp);
