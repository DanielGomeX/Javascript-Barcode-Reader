var javascriptBarcodeReader=function(n){"use strict";function e(n){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function r(n,e,r,t,w,a,i){try{var o=n[a](i),u=o.value}catch(n){return void r(n)}o.done?e(u):Promise.resolve(u).then(t,w)}function t(n){return function(){var e=this,t=arguments;return new Promise(function(w,a){var i=n.apply(e,t);function o(n){r(i,w,a,o,u,"next",n)}function u(n){r(i,w,a,o,u,"throw",n)}o(void 0)})}}n=n&&n.hasOwnProperty("default")?n.default:n;var w="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var a="object"===("undefined"==typeof process?"undefined":e(process))&&process.release&&"node"===process.release.name;function i(n){var e=document.createElement("canvas"),r=e.getContext("2d"),t=n.naturalWidth,w=n.naturalHeight;return e.width=t,e.height=w,r.drawImage(n,0,0),r.getImageData(0,0,n.naturalWidth,n.naturalHeight)}function o(){return(o=t(regeneratorRuntime.mark(function e(r){var t,w,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return w=!!(t="string"==typeof r)&&("#"===!(u=r)[0]||/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(u)),o=r.tagName,e.abrupt("return",new Promise(function(e,u){if(t)if(a)n.read(w?{url:r,headers:{}}:r,function(n,r){if(n)u(n);else{var t=r.bitmap,w=t.data,a=t.width,i=t.height;e({data:w.toJSON().data,width:a,height:i})}});else if(w){var c=new Image;c.onerror=u,c.onload=function(){return e(i(c))},c.src=r}else{var f=document.getElementById(r);f&&e(i(f)),u(new Error("Invalid image source specified!"))}else o?("IMG"===o?e(i(r)):"CANVAS"===o&&e(r.getContext("2d").getImageData(0,0,r.naturalWidth,r.naturalHeight)),u(new Error("Invalid image source specified!"))):r.data&&r.width&&r.height?e(r):u(new Error("Invalid image source specified!"))}));case 4:case"end":return e.stop()}var u},e)}))).apply(this,arguments)}var u,c={getImageDataFromSource:function(n){return o.apply(this,arguments)},getLines:function(n){for(var e=n.data,r=n.start,t=n.end,w=n.channels,a=n.width,i=e.slice(r,t),o=[],u=[],c=[],f=1,l=0,s=0,d={left:!0,right:!0},h=0;h<2;h+=1)for(var p=0;p<a;p+=1){var v=(h*a+p)*w,g=(3*i[v]+4*i[v+1]+2*i[v+2])/9,m=o[p];i[v]=g,i[v+1]=g,i[v+2]=g,o[p]=g+(m||0)}for(var b=0;b<a;b+=1){o[b]/=2;var C=o[b];C<l?l=C:s=C}for(var y=l+(s-l)/2,j=0;j<a;j+=1){for(var S=0,x=void 0,M=0;M<2;M+=1)(x=i[(M*a+j)*w])>y&&(S+=1);0===j&&x<=y&&(d.left=!1),j===a-1&&x<=y&&(d.right=!1),u.push(S>1)}for(var O=u[0],N=0;N<a;N+=1)u[N]===O?(f+=1,N===a-1&&c.push(f)):(c.push(f),f=1,O=u[N]);return{lines:c,padding:d}}},f=["212222","222122","222221","121223","121322","131222","122213","122312","132212","221213","221312","231212","112232","122132","122231","113222","123122","123221","223211","221132","221231","213212","223112","312131","311222","321122","321221","312212","322112","322211","212123","212321","232121","111323","131123","131321","112313","132113","132311","211313","231113","231311","112133","112331","132131","113123","113321","133121","313121","211331","231131","213113","213311","213131","311123","311321","331121","312113","312311","332111","314111","221411","431111","111224","111422","121124","121421","141122","141221","112214","112412","122114","122411","142112","142211","241211","221114","413111","241112","134111","111242","121142","121241","114212","124112","124211","411212","421112","421211","212141","214121","412121","111143","111341","131141","114113","114311","411113","411311","113141","114131","311141","411131","211412","211214","211232","233111","211133","2331112"],l=[" ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","\\","]","^","_","NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","HT","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","FNC 3","FNC 2","Shift B","Code C","Code B","FNC 4","FNC 1"],s=[" ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","\\","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","DEL","FNC 3","FNC 2","Shift A","Code C","FNC 4","Code A","FNC 1"],d=["00","01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","Code B","Code A","FNC 1"],h=function(n){var e=n.reduce(function(n,e){return n+e},0)/11;return n.map(function(n){return Math.round(n/e)}).join("")},p=function(n){var e,r,t,w,a,i=[];n.pop();var o=n.slice(0);switch(t=h(o.splice(0,6))){case"211214":e=s,r=104;break;case"211232":e=d,r=105;break;default:e=l,r=103}for(var u=1;o.length>12;u+=1)switch(t=h(o.splice(0,6)),r+=u*(a=f.indexOf(t)),w=e[a]){case"Code A":e=l;break;case"Code B":e=s;break;case"Code C":e=d;break;default:i.push(w)}return t=h(o.splice(0,6)),r%103!==f.indexOf(t)?null:i.join("")},v=["nnwwn","wnnnw","nwnnw","wwnnn","nnwnw","wnwnn","nwwnn","nnnww","wnnwn","nwnwn"],g=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"standard",r=[],t=Math.ceil(n.reduce(function(n,e){return(n+e)/2},0));if("interleaved"===e){var w=n.splice(0,4).map(function(n){return n>t?"w":"n"}).join(""),a=n.splice(n.length-3,3).map(function(n){return n>t?"w":"n"}).join("");if("nnnn"!==w||"wnn"!==a)return null;for(;n.length>0;){var i=n.splice(0,10),o=i.filter(function(n,e){return e%2==0}).map(function(n){return n>t?"w":"n"}).join("");r.push(v.indexOf(o));var u=i.filter(function(n,e){return e%2!=0}).map(function(n){return n>t?"w":"n"}).join("");r.push(v.indexOf(u))}}else if("standard"===e){var c=n.splice(0,6).filter(function(n,e){return e%2==0}).map(function(n){return n>t?"w":"n"}).join(""),f=n.splice(n.length-5,5).filter(function(n,e){return e%2==0}).map(function(n){return n>t?"w":"n"}).join("");if("wwn"!==c||"wnw"!==f)return null;for(;n.length>0;){var l=n.splice(0,10).filter(function(n,e){return e%2==0}).map(function(n){return n>t?"w":"n"}).join("");r.push(v.indexOf(l))}}return r.join("")},m={nnnwwnwnn:"0",wnnwnnnnw:"1",nnwwnnnnw:"2",wnwwnnnnn:"3",nnnwwnnnw:"4",wnnwwnnnn:"5",nnwwwnnnn:"6",nnnwnnwnw:"7",wnnwnnwnn:"8",nnwwnnwnn:"9",wnnnnwnnw:"A",nnwnnwnnw:"B",wnwnnwnnn:"C",nnnnwwnnw:"D",wnnnwwnnn:"E",nnwnwwnnn:"F",nnnnnwwnw:"G",wnnnnwwnn:"H",nnwnnwwnn:"I",nnnnwwwnn:"J",wnnnnnnww:"K",nnwnnnnww:"L",wnwnnnnwn:"M",nnnnwnnww:"N",wnnnwnnwn:"O",nnwnwnnwn:"P",nnnnnnwww:"Q",wnnnnnwwn:"R",nnwnnnwwn:"S",nnnnwnwwn:"T",wwnnnnnnw:"U",nwwnnnnnw:"V",wwwnnnnnn:"W",nwnnwnnnw:"X",wwnnwnnnn:"Y",nwwnwnnnn:"Z",nwnnnnwnw:"-",wwnnnnwnn:".",nwwnnnwnn:" ",nwnwnwnnn:"$",nwnwnnnwn:"/",nwnnnwnwn:"+",nnnwnwnwn:"%",nwnnwnwnn:"*"},b=function(n){for(var e=[],r=Math.ceil(n.reduce(function(n,e){return n+e},0)/n.length);n.length>0;){var t=n.splice(0,10).map(function(n){return n>r?"w":"n"});e.push(m[t.slice(0,9).join("")])}return"*"!==e.pop()||"*"!==e.shift()?null:e.join("")},C=[{100010100:"0"},{101001000:"1"},{101000100:"2"},{101000010:"3"},{100101000:"4"},{100100100:"5"},{100100010:"6"},{101010000:"7"},{100010010:"8"},{100001010:"9"},{110101000:"A"},{110100100:"B"},{110100010:"C"},{110010100:"D"},{110010010:"E"},{110001010:"F"},{101101000:"G"},{101100100:"H"},{101100010:"I"},{100110100:"J"},{100011010:"K"},{101011000:"L"},{101001100:"M"},{101000110:"N"},{100101100:"O"},{100010110:"P"},{110110100:"Q"},{110110010:"R"},{110101100:"S"},{110100110:"T"},{110010110:"U"},{110011010:"V"},{101101100:"W"},{101100110:"X"},{100110110:"Y"},{100111010:"Z"},{100101110:"-"},{111010100:"."},{111010010:" "},{111001010:"$"},{101101110:"/"},{101110110:"+"},{110101110:"%"},{100100110:"($)"},{111011010:"(%)"},{111010110:"(/)"},{100110010:"(+)"},{101011110:"*"}],y=function(n){var e=[],r=[];n.pop();for(var t=Math.ceil(n.reduce(function(n,e){return n+e},0)/n.length),w=Math.ceil(n.reduce(function(n,e){return e<t?(n+e)/2:n},0)),a=0;a<n.length;a+=1)for(var i=n[a];i>0;)a%2==0?r.push(1):r.push(0),i-=w;for(var o=function(n){var t=r.slice(n,n+9).join(""),w=C.filter(function(n){return Object.keys(n)[0]===t});e.push(w[0][t])},u=0;u<r.length;u+=9)o(u);if("*"!==e.shift()||"*"!==e.pop())return null;for(var c,f=e.pop(),l=0,s=function(n){return Object.values(n)[0]===c},d=e.length-1;d>=0;d-=1)c=e[d],l+=C.indexOf(C.filter(s)[0])*(1+(e.length-(d+1))%20);if(Object.values(C[l%47])[0]!==f)return null;var h=e.pop();l=0;for(var p=e.length-1;p>=0;p-=1)c=e[p],l+=C.indexOf(C.filter(s)[0])*(1+(e.length-(p+1))%20);return Object.values(C[l%47])[0]!==h?null:e.join("")},j={3211:"0",2221:"1",2122:"2",1411:"3",1132:"4",1231:"5",1114:"6",1312:"7",1213:"8",3112:"9"},S=function(n){var e="";n.unshift(0);for(var r=~~((n[1]+n[2]+n[3])/3),t=1;t<n.length;t+=1){var w=void 0;w=e.length<6?n.slice(4*t,4*t+4):n.slice(4*t+5,4*t+9);var a=[Math.round(w[0]/r),Math.round(w[1]/r),Math.round(w[2]/r),Math.round(w[3]/r)],i=j[a.join("")]||j[a.reverse().join("")];if(i&&(e+=i),12===e.length)break}return e},x={3211:"0",2221:"1",2122:"2",1411:"3",1132:"4",1231:"5",1114:"6",1312:"7",1213:"8",3112:"9"},M=function(n){var e="";n.unshift(0);for(var r=~~((n[1]+n[2]+n[3])/3),t=1;t<n.length;t+=1){var w=void 0;w=e.length<4?n.slice(4*t,4*t+4):n.slice(4*t+5,4*t+9);var a=[Math.round(w[0]/r),Math.round(w[1]/r),Math.round(w[2]/r),Math.round(w[3]/r)],i=x[a.join("")]||x[a.reverse().join("")];if(i&&(e+=i),8===e.length)break}return e},O={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nnnwnww:"B",nwnwnnw:"C",nnnwwwn:"D"},N=function(n){for(var e=[],r=Math.ceil(n.reduce(function(n,e){return(n+e)/2},0));n.length>0;){var t=n.splice(0,8).splice(0,7).map(function(n){return n<r?"n":"w"}).join("");e.push(O[t])}return e.join("")};return function(n){var e={"code-128":p,"code-2of5":g,"code-39":b,"code-93":y,"ean-13":S,"ean-8":M,codabar:N};function r(n,e){return a.apply(this,arguments)}function a(){return(a=t(regeneratorRuntime.mark(function n(r,t){var w,a,i,o,u,f,l,s,d,h,p,v,g,m,b;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.barcode=t.barcode.toLowerCase(),-1!==(w=Object.keys(e)).indexOf(t.barcode)){n.next=4;break}throw new Error("Invalid barcode specified. Available decoders: ".concat(w,". https://github.com/mubaidr/Javascript-Barcode-Reader#available-decoders"));case 4:return n.next=6,c.getImageDataFromSource(r);case 6:a=n.sent,i=a.data,o=a.width,u=a.height,f=i.length/(o*u),s=(l=[1,9,2,8,3,7,4,6,5]).length,d=u/(s+1);case 14:if(!(s-=1)){n.next=26;break}if(h=f*o*Math.floor(d*l[s]),p=f*o*Math.floor(d*l[s])+2*f*o,v=c.getLines({data:i,start:h,end:p,width:o,height:u,channels:f}),g=v.lines,m=v.padding,!g||0===g.length){n.next=24;break}if(m.left&&g.shift(),m.right&&g.pop(),!(b=e[t.barcode](g,t.type))){n.next=24;break}return n.abrupt("return",b);case 24:n.next=14;break;case 26:throw new Error("Failed to extract barcode!");case 27:case"end":return n.stop()}},n)}))).apply(this,arguments)}n&&n.exports?n.exports=r:w.javascriptBarcodeReader=r}(u={exports:{}},u.exports),u.exports}(window.jimp);
//# sourceMappingURL=javascript-barcode-reader.min.js.map
